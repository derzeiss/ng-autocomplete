"use strict";!function(){function t(t,e,n){function i(t){if(t.preventDefault(),m.selectedIndex>-1){var e=m.items[m.selectedIndex];if(e.isEmptyState)return;m.model=m.searchFilter=e.label,m.selectedIndex=0,a()}}function o(){m.selectedIndex>-1&&(m.select(m.items[m.selectedIndex]),a())}function l(){m.blur()}function s(){m.selectedIndex=--m.selectedIndex<0?m.items.length-1:m.selectedIndex,m.selectedIndex>=m.items.length&&(m.selectedIndex=m.items.length-1),a()}function c(){m.selectedIndex=(m.selectedIndex+1)%m.items.length,a()}function p(){}function a(){e.$$phase||e.$apply()}var m=this;m.isCompleting=!1,m.selectedIndex=-1,m.items=[],m.focus=function(){m.model.length>=m.options.minLength&&(m.isCompleting=!0),m.onFocus(m)},m.blur=function(t){m.selectedIndex=-1,t?m.isCompleting=!1:(n(function(){return m.isCompleting=!1},100),m.onBlur(m))},m.type=function(){m.model.length<m.options.minLength?m.isCompleting=!1:(m.isCompleting=!0,m.searchFilter=m.model,m.selectedIndex>=m.items.length&&(m.selectedIndex=-1)),m.onType(m)},m.select=function(t){t.isEmptyState||(m.model=m.searchFilter=t.label,m.blur(!0),m.onSelect(m,t))},m.$onInit=function(){m.options||(m.options={}),m.options.list||(m.options.list={}),m.options.item||(m.options.item={}),m.data=m.options.data||m.data||[],m.model=m.options.input.value||"",m.searchFilter=m.model,m.options.minLength=void 0!==m.options.minLength?m.options.minLength:2,m.options.maxItems=void 0!==m.options.maxItems?m.options.maxItems:5,m.options.emptyState=void 0!==m.options.emptyState?m.options.emptyState:"No results found...",m.options.list.classVisible=m.options.list.classVisible||"autocomplete__list_visible",m.options.item.classActive=m.options.item.classActive||"autocomplete__item_active",m.options.item.classHighlight=m.options.item.classHighlight||"autocomplete__item_highlight",m.onFocus=m.options.onFocus||m.onFocus||p,m.onBlur=m.options.onBlur||m.onBlur||p,m.onType=m.options.onType||m.onType||p,m.onSelect=m.options.onSelect||m.onSelect||p,m.options.emptyState&&m.data.splice(0,0,{isEmptyState:!0,label:m.options.emptyState})},m.$postLink=function(){t[0].addEventListener("keydown",function(t){var e=t.keyCode;9===e?i(t):13===e?o():27===e?l():38===e?s():40===e&&c()})}}angular.module("ngAutocomplete",[]).component("autocomplete",{template:'\n                <input class="autocomplete__input"\n                       type="text"\n                       id="{{$ctrl.options.input.id}}"\n                       placeholder="{{$ctrl.options.input.placeholder}}"\n                       ng-class="$ctrl.options.input.class"\n                       ng-model="$ctrl.model"\n                       ng-focus="$ctrl.focus()"\n                       ng-change="$ctrl.type()"\n                       ng-blur="$ctrl.blur()">\n                \n                <div class="autocomplete__list"\n                     id="{{$ctrl.options.list.id}}"\n                     ng-class="[$ctrl.options.list.class, {\'{{$ctrl.options.list.classVisible}}\': $ctrl.isCompleting}]">\n                \n                    <div class="autocomplete__item"\n                         ng-repeat="item in $ctrl.items = ($ctrl.data | searchFilter : $ctrl.searchFilter : $ctrl.options.maxItems) track by $index"\n                         ng-bind-html="item.label | highlight: $ctrl.searchFilter : $ctrl.options.item.classHighlight"\n                         ng-class="[$ctrl.options.item.class, {\'{{$ctrl.options.item.classActive}}\': $ctrl.selectedIndex === $index}, {\'autocomplete__item_empty-state\': item.isEmptyState}]"\n                         ng-click="$ctrl.select(item)"\n                         ng-mouseenter="$ctrl.selectedIndex = $index">\n                    </div>\n                </div>',controller:t,bindings:{data:"<",options:"<",onFocus:"&",onBlur:"&",onType:"&",onSelect:"&"}}),t.$inject=["$element","$scope","$timeout"]}(),function(){function t(t){return function(e,n,i){var o=new RegExp(n,"gi"),l=e.replace(o,'<span class="'+i+'">$&</span>');return t.trustAsHtml(l)}}angular.module("ngAutocomplete").filter("highlight",t),t.$inject=["$sce"]}(),function(){function t(){return function(t,e,n){var i=new RegExp(e,"i"),o=n,l=t.filter(function(t){if(!(o<=0))return!(t.isEmptyState||!i.test(t.label))&&(o--,!0)});return!l.length&&t.length&&(l[0]=t[0]),l}}angular.module("ngAutocomplete").filter("searchFilter",t),t.$inject=[]}();